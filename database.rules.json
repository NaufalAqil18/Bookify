{
  "rules": {
    ".read": true,
    ".write": "auth != null",
    "users": {
      "$uid": {
        ".read": "$uid === auth.uid",
        ".write": "$uid === auth.uid"
      }
    },
    "books": {
      ".indexOn": ["isBestDeal", "isTopBook", "isLatestBook"],
      ".read": true,
      "$bookId": {
        ".validate": "newData.hasChildren(['title', 'author', 'category', 'price', 'description', 'imageUrl', 'publishedDate', 'stock', 'rating'])",
        "title": { ".validate": "newData.isString()" },
        "author": { ".validate": "newData.isString()" },
        "category": { ".validate": "newData.isString()" },
        "price": { ".validate": "newData.isNumber() && newData.val() >= 0" },
        "description": { ".validate": "newData.isString()" },
        "imageUrl": { ".validate": "newData.isString()" },
        "publishedDate": { ".validate": "newData.isString()" },
        "stock": { ".validate": "newData.isNumber() && newData.val() >= 0" },
        "rating": { ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 5" },
        "isBestDeal": { ".validate": "newData.isBoolean()" },
        "isLatestBook": { ".validate": "newData.isBoolean()" },
        "isTopBook": { ".validate": "newData.isBoolean()" },
        "$other": { ".validate": false }
      },
      ".write": "auth != null && root.child('users').child(auth.uid).exists()"
    },
    "categories": {
      ".read": true,
      "$categoryId": {
        ".validate": "newData.hasChildren(['name', 'description'])",
        "name": { ".validate": "newData.isString()" },
        "description": { ".validate": "newData.isString()" },
        "categoryId": { ".validate": "newData.isString()" },
        "$other": { ".validate": false }
      },
      ".write": "auth != null && root.child('users').child(auth.uid).exists()"
    },
    "cart": {
      "$uid": {
        ".read": "$uid === auth.uid",
        ".write": "$uid === auth.uid"
      }
    }
  }
} 